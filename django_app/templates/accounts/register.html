{% extends "base.html" %}
{% load static sass_tags %}

{% block title %}회원가입 - MedAI Research{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% sass_src 'css/register.scss' %}">
{% endblock %}

{% block content %}
<div class="register-hero">

  <div class="register-hero__overlay"></div>
  
  <nav class="register-nav">
    <div class="register-logo">
      <img src="/static/img/medai-logo.png" alt="MedAI 로고">
      <span>MedAI</span>
    </div>
    <a href="{% url 'accounts:login' %}" class="register-nav-login">Login</a>
  </nav>

  <div class="register-card-wrapper">
    <div class="register-card">
      <div class="register-card__header">
        <button class="register-card__close" onclick="window.location.href='{% url 'accounts:login' %}'">
          <i class="fa-solid fa-xmark"></i>
        </button>
        <h3>회원가입</h3>
      </div>

      <form method="post" novalidate>
        {% csrf_token %}

        {% if form.non_field_errors %}
        <div class="register-error">
          {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
          {% endfor %}
        </div>
        {% endif %}

        <div class="register-field">
          <label for="{{ form.name.id_for_label }}">Username</label>
          <div class="register-input-wrapper">
            <i class="fa-solid fa-user"></i>
            <input
              type="text"
              name="{{ form.name.html_name }}"
              id="{{ form.name.auto_id }}"
              value="{{ form.name.value|default_if_none:'' }}"
              autocomplete="username"
              required
            />
          </div>
          {% if form.name.errors %}
          <p class="register-error register-error--inline">{{ form.name.errors|first }}</p>
          {% endif %}
        </div>

        <div class="register-field">
          <label for="{{ form.email.id_for_label }}">Email</label>
          <div class="register-input-wrapper">
            <i class="fa-solid fa-envelope"></i>
            <input
              type="email"
              name="{{ form.email.html_name }}"
              id="{{ form.email.auto_id }}"
              value="{{ form.email.value|default_if_none:'' }}"
              autocomplete="email"
              required
            />
          </div>
          {% if form.email.errors %}
          <p class="register-error register-error--inline">{{ form.email.errors|first }}</p>
          {% endif %}
        </div>

        <div class="register-field">
          <label for="{{ form.password1.id_for_label }}">Password</label>
          <div class="register-input-wrapper">
            <i class="fa-solid fa-lock"></i>
            <input
              type="password"
              name="{{ form.password1.html_name }}"
              id="{{ form.password1.auto_id }}"
              autocomplete="new-password"
              required
            />
          </div>
          {% if form.password1.errors %}
          <p class="register-error register-error--inline">{{ form.password1.errors|first }}</p>
          {% endif %}
        </div>

        <div class="register-field">
          <label for="{{ form.password2.id_for_label }}">Confirm Password</label>
          <div class="register-input-wrapper">
            <i class="fa-solid fa-lock"></i>
            <input
              type="password"
              name="{{ form.password2.html_name }}"
              id="{{ form.password2.auto_id }}"
              autocomplete="new-password"
              required
            />
          </div>
          {% if form.password2.errors %}
          <p class="register-error register-error--inline">{{ form.password2.errors|first }}</p>
          {% endif %}
        </div>

        <div class="register-terms">
          <input
            type="checkbox"
            name="{{ form.agree_terms.html_name }}"
            id="{{ form.agree_terms.auto_id }}"
            {% if form.agree_terms.value %}checked{% endif %}
            required
          >
          <label for="{{ form.agree_terms.auto_id }}">이용약관에 동의합니다</label>
        </div>
        {% if form.agree_terms.errors %}
        <p class="register-error register-error--inline">{{ form.agree_terms.errors|first }}</p>
        {% endif %}

        <button type="submit" class="register-submit">
          <span>등록</span>
          <!-- <span class="register-submit__pulse"></span>-->
        </button>
      </form>

      <p class="register-switch">
        이미 계정이 있으신가요?&nbsp;&nbsp;<a href="{% url 'accounts:login' %}">로그인</a>
      </p>
    </div>
  </div>
</div>
{% endblock %}
